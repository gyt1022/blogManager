package com.guo.config;import com.alibaba.druid.pool.DruidDataSource;import com.alibaba.druid.support.http.StatViewServlet;import com.alibaba.druid.support.http.WebStatFilter;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Value;import org.springframework.boot.web.servlet.FilterRegistrationBean;import org.springframework.boot.web.servlet.ServletRegistrationBean;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import java.util.HashMap;import java.util.Map;/** * * Durid 监控页面配置类 * @author guoyutao * @date 2019/02/23 */@Configurationpublic class DuridConfig {    private static  final Logger logger = LoggerFactory.getLogger(DuridConfig.class);    @Value("${druid.login.username}")    private String userName;    @Value("${druid.login.password}")    private String passWord;    @Value("${druid.allow.ip}")    private String allowIp;    @Bean    public ServletRegistrationBean druidServlet() {        logger.info("初始化...Driud Servlet");        ServletRegistrationBean servletRegistrationBean = new ServletRegistrationBean();        servletRegistrationBean.setServlet(new StatViewServlet());        servletRegistrationBean.addUrlMappings("/druid/*");        Map<String, String> initParameters = new HashMap<>();        initParameters.put("loginUsername",userName);        initParameters.put("loginPassword",passWord);        initParameters.put("resetEnable","false");        servletRegistrationBean.setInitParameters(initParameters);        return servletRegistrationBean;    }    @Bean    public FilterRegistrationBean filterRegistrationBean(){        FilterRegistrationBean filterRegistrationBean=new FilterRegistrationBean();        filterRegistrationBean.setFilter(new WebStatFilter());        filterRegistrationBean.addUrlPatterns("/*");        filterRegistrationBean.addInitParameter("exclusions"," *.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/* ");        return filterRegistrationBean;    }}